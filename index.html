<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Portfólio Interativo - Felipe Izui</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      background-color: #F8F7F4;
      color: #3d405b;
    }

    .nav-link {
      transition: color 0.3s;
    }

    .nav-link:hover, .nav-link.active {
      color: #3A8891;
    }

    .timeline-item .details {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease-in-out;
    }

    .timeline-item.open .details {
      max-height: 500px;
    }

    .tag {
      cursor: pointer;
      transition: all 0.2s ease-in-out;
    }

    .tag.active {
      transform: scale(1.1);
    }

    /* Foto de perfil */
    .profile-pic {
      width: 56px;
      height: 56px;
      object-fit: cover;
      border-radius: 9999px;
      border: 2px solid #3A8891;
      background: #fff;
    }

    .profile-upload-label {
      cursor: pointer;
      color: #3A8891;
      font-size: 0.85rem;
      text-decoration: underline;
    }

    .profile-upload-label:hover {
      color: #25636a;
    }
  </style>
</head>
<body class="antialiased">
  <header class="bg-[#F8F7F4]/90 backdrop-blur-md sticky top-0 z-50 shadow-md border-b border-[#3A8891]/10">
    <nav class="container mx-auto px-6 py-4 flex justify-between items-center">
      <div class="flex items-center space-x-4">
        <img id="profilePic"
             src="https://avatars.githubusercontent.com/u/106010430?v=4"
             alt="Foto de Perfil do LinkedIn"
             class="profile-pic shadow-md">
        <div>
          <div class="text-xl font-bold text-[#3d405b] flex items-center">
            Felipe Izui
          </div>
          <div class="text-xs text-gray-500">Analista de Business Intelligence</div>
        </div>
      </div>
      <div class="hidden md:flex items-center space-x-8">
        <a href="#sobre" class="nav-link font-medium">Sobre</a>
        <a href="#projetos" class="nav-link font-medium">Projetos</a>
        <a href="#experiencia" class="nav-link font-medium">Experiência</a>
        <a href="#habilidades" class="nav-link font-medium">Habilidades</a>
        <a href="#educacao" class="nav-link font-medium">Educação</a>
      </div>
    </nav>
  </header>

  <main class="container mx-auto px-6 py-8 md:py-16">
    <section id="diario" class="hidden mb-24">
      <h2 class="text-3xl font-bold text-center mb-8 text-[#3d405b]">Diário Pessoal</h2>

     <!-- Seção do Diário -->
<section id="diario" class="hidden mb-24">
  <h2 class="text-3xl font-bold text-center mb-8 text-[#3d405b]">Diário Pessoal</h2>

  <!-- Seção para a senha de atualização -->
  <div id="update-password-section" class="max-w-md mx-auto bg-white p-6 rounded-lg shadow-md text-center hidden">
    <p class="text-gray-700 mb-4">Digite a senha para atualizar o conteúdo do diário:</p>
    <input type="password" id="update-password" placeholder="Senha de Atualização" class="border rounded px-3 py-2 w-full mb-4 text-center focus:outline-none focus:ring-2 focus:ring-[#3A8891]" />
    <button id="check-update-password" class="bg-[#3A8891] text-white px-6 py-2 rounded-lg hover:bg-opacity-90 transition w-full">Atualizar</button>
    <p id="wrong-update-pass" class="text-red-500 text-sm mt-3 hidden">Senha incorreta. Tente novamente.</p>
  </div>

  <!-- Área para editar o conteúdo do diário -->
  <div id="update-content-section" class="hidden">
    <textarea id="new-content" class="w-full h-32 p-4 border rounded-lg" placeholder="Edite o conteúdo do diário aqui..."></textarea>
    <button id="save-new-content" class="bg-[#3A8891] text-white px-6 py-2 rounded-lg hover:bg-opacity-90 transition w-full mt-4">Salvar Novo Conteúdo</button>
  </div>

  <!-- Novo Registro -->
  <button id="new-entry-btn" class="bg-[#3A8891] text-white px-6 py-3 rounded-lg mt-8">Novo Registro</button>

  <!-- Calendário -->
  <div id="diario-content" class="hidden">
    <div class="max-w-3xl mx-auto bg-white p-6 rounded-lg shadow-md mt-8">
      <div class="mb-4 text-center">
        <div class="grid grid-cols-7 gap-1 text-center mb-6 text-sm"></div>
      </div>
      <h3 id="diario-title" class="text-2xl font-semibold text-[#3A8891] mb-4 text-center"></h3>
      <p id="diario-text" class="text-gray-700 whitespace-pre-line leading-relaxed"></p>
      <p id="no-entry" class="text-gray-500 italic text-center mt-6 hidden">Nenhum registro encontrado para esta data.</p>
    </div>
  </div>
</section>

  <script>
   document.addEventListener('DOMContentLoaded', () => {
  const updatePasswordSection = document.getElementById('update-password-section');
  const checkUpdatePasswordBtn = document.getElementById('check-update-password');
  const wrongUpdatePass = document.getElementById('wrong-update-pass');
  const updatePasswordField = document.getElementById('update-password');
  const updateContentSection = document.getElementById('update-content-section');
  const saveNewContentBtn = document.getElementById('save-new-content');
  const newContentField = document.getElementById('new-content');
  const newEntryBtn = document.getElementById('new-entry-btn');  // Aqui definimos o botão de Novo Registro
  
  const UPDATE_PASSWORD = 'atualizacao'; // A senha de atualização

  let diarioData = {};

  // Carregar dados do diário do GitHub
  async function loadDiarioData() {
    try {
      const response = await fetch('https://raw.githubusercontent.com/FelipeIzui/InteractiveCurriculum/refs/heads/main/diario.json');
      diarioData = await response.json();
      renderCalendar();
    } catch (error) {
      console.error('Erro ao carregar o diário:', error);
      diarioText.textContent = 'Erro ao carregar o diário.';
    }
  }

  // Função para renderizar o calendário
  function renderCalendar() {
    const calendarContainer = document.createElement('div');
    calendarContainer.className = 'grid grid-cols-7 gap-1 text-center mb-6 text-sm';
    const today = new Date();
    const month = today.getMonth();
    const year = today.getFullYear();
    
    const daysInMonth = new Date(year, month + 1, 0).getDate();
    const firstDay = new Date(year, month, 1).getDay();
    
    calendarContainer.innerHTML = '<div class="col-span-7 font-semibold mb-2 text-[#3A8891]">' + 
      today.toLocaleString('pt-BR', { month: 'long', year: 'numeric' }) + '</div>';
    
    const weekDays = ['D', 'S', 'T', 'Q', 'Q', 'S', 'S'];
    weekDays.forEach(d => {
      const el = document.createElement('div');
      el.textContent = d;
      el.className = 'font-semibold text-gray-600';
      calendarContainer.appendChild(el);
    });
    
    for (let i = 0; i < firstDay; i++) {
      const empty = document.createElement('div');
      calendarContainer.appendChild(empty);
    }
    
    for (let day = 1; day <= daysInMonth; day++) {
      const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
      const cell = document.createElement('div');
      cell.textContent = day;
      cell.className = 'cursor-pointer py-2 rounded-lg hover:bg-[#3A8891]/10 transition';
      
      if (diarioData[dateStr]) {
        cell.classList.add('bg-[#3A8891]/20', 'font-bold', 'text-[#3A8891]');
      } else {
        cell.classList.add('text-gray-600');
      }

      cell.addEventListener('click', () => renderEntry(dateStr));
      calendarContainer.appendChild(cell);
    }
    
    diarioContent.prepend(calendarContainer);
  }

  // Função para exibir o conteúdo do diário ao clicar em uma data
  function renderEntry(date) {
    if (diarioData[date]) {
      const entry = diarioData[date];
      diarioTitle.innerHTML = `<div class="text-lg text-gray-500 mb-1">${entry.titulo}</div>
      ${entry.subtitulo ? `<div class='text-xl font-bold text-[#3A8891] mb-4'>${entry.subtitulo}</div>` : ''}`;
      diarioText.textContent = entry.conteudo;
      diarioTitle.classList.remove('hidden');
      diarioText.classList.remove('hidden');
      noEntry.classList.add('hidden');
    } else {
      diarioTitle.textContent = '';
      diarioText.textContent = '';
      noEntry.classList.remove('hidden');
    }
  }

  // Função para verificar a senha de atualização
  checkUpdatePasswordBtn.addEventListener('click', () => {
    const entered = updatePasswordField.value;
    if (entered === UPDATE_PASSWORD) {
      updatePasswordSection.classList.add('hidden');
      updateContentSection.classList.remove('hidden');
    } else {
      wrongUpdatePass.classList.remove('hidden');
    }
  });

  // Função para editar e salvar o conteúdo do diário
  saveNewContentBtn.addEventListener('click', async () => {
    const newContent = newContentField.value.trim();
    if (!newContent) {
      alert('Por favor, insira o conteúdo.');
      return;
    }

    const date = "2025-11-05"; // Data fixa para esse exemplo
    diarioData[date].conteudo = newContent;

    // Atualiza a entrada do diário com o novo conteúdo (não faz download)
    renderEntry(date);

    alert('Conteúdo atualizado!');
  });

  // Novo registro
  newEntryBtn.addEventListener('click', () => {
    const date = new Date().toISOString().split('T')[0];
    if (diarioData[date]) {
      newContentField.value = diarioData[date].conteudo; // Carrega o conteúdo existente para edição
    } else {
      newContentField.value = ''; // Limpa caso não haja conteúdo
    }
    newEntryModal.classList.remove('hidden');
  });

  closeModalBtn.addEventListener('click', () => {
    newEntryModal.classList.add('hidden');
  });

  // Carregar dados do diário ao iniciar
  loadDiarioData();
});
</script>
</body>
</html>
